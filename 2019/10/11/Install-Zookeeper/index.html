
<!DOCTYPE html>
<html lang="en" class="loading">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Install Zookeeper&lt;br&gt;（安装Zookeeper） - JacksonYuu - Personal Blog</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="Zookeeper installation can be divided into single machine mode and cluster mode. We introduce clust,"> 
    <meta name="author" content="JacksonYuu"> 
    <link rel="alternative" href="atom.xml" title="JacksonYuu - Personal Blog" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">JacksonYuu - Personal Blog</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" data-url="https://JacksonYuu.github.io"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">Install Zookeeper<br>（安装Zookeeper）</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">Install Zookeeper<br>（安装Zookeeper）</h1>
        <div class="stuff">
            <span>十月 11, 2019</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Install/">Install</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/Zookeeper/">Zookeeper</a></li></ul>


        </div>
        <div class="content markdown">
            <p>Zookeeper installation can be divided into single machine mode and cluster mode. We introduce cluster mode. In cluster mode, it is recommended to deploy at least three ZK processes or odd ZK processes. If only two ZK processes are deployed, when one of them hangs, the remaining process does not constitute the majority of a quorum. Therefore, deploying two processes is even more unreliable than single-machine mode, because one of the two processes is more likely to be unavailable than the other.</p>
<p>（Zookeeper安装可分为单机模式和集群模式，我们这里介绍的是集群模式，在集群模式下，建议至少部署3个zk进程，或者部署奇数个zk进程。如果只部署2个zk进程，当其中一个zk进程挂掉后，剩下的一个进程并不能构成一个quorum的大多数。因此，部署2个进程甚至比单机模式更不可靠，因为2个进程其中一个不可用的可能性比一个进程不可用的可能性还大）</p>
<p>Download all files（所有文件下载）：<a href="https://pan.baidu.com/s/1rv1WOsnsSaBBfDgjS-DhvQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1rv1WOsnsSaBBfDgjS-DhvQ</a> </p>
<p>Extraction Code（提取码）：sslj</p>
<h3 id="1、first（第一步）"><a href="#1、first（第一步）" class="headerlink" title="1、first（第一步）"></a>1、first（第一步）</h3><p>Upload the tar package downloaded from windows to the virtual machine (using CentOS 7.0 here) and then use （将windows下载的tar包上传到虚拟机（这里使用的是CentOS7.0）当中，之后在使用）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf zookeeper-3.4.14.tar -C /usr/local/hadoop</span><br></pre></td></tr></table></figure>

<h3 id="2、second（第二步）"><a href="#2、second（第二步）" class="headerlink" title="2、second（第二步）"></a>2、second（第二步）</h3><p>Enter the conf directory of the newly decompressed file and modify zoo.cfg to:</p>
<p>（进入刚刚解压后文件的conf目录下，修改zoo.cfg文件为：）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">tickTime=2000（超时配置的基本单位）</span><br><span class="line"></span><br><span class="line">dataDir=/usr/local/hadoop/zookeeper-3.4.14/dataDir（存放myid文件）</span><br><span class="line"></span><br><span class="line">dataLogDir=/usr/local/hadoop/zookeeper-3.4.14/dataLogDir（存放日志文件）</span><br><span class="line"></span><br><span class="line">clientPort=2181</span><br><span class="line"></span><br><span class="line">initLimit=5（配置follower与leader之间建立连接后进行同步的最长时间）</span><br><span class="line"></span><br><span class="line">syncLimit=2（配置follower和leader之间发送消息，请求和应答的最大时间长度）</span><br><span class="line"></span><br><span class="line">server.1=192.168.229.160:2888:3888</span><br><span class="line"></span><br><span class="line">server.2=192.168.229.161:2888:3888  </span><br><span class="line"></span><br><span class="line">server.3=192.168.229.162:2888:3888  </span><br><span class="line">（其中1、2、3为一个数字，表示zk进程的id，这个id也是dataDir目录</span><br><span class="line">下myid文件的内容。2888表示follower和leader交换消息所使用的端口，</span><br><span class="line">3888表示选举leader所使用的端口。）</span><br></pre></td></tr></table></figure>

<p>Create a myid file under the dataDir folder and write the ID (the content can only be between 1 and 255 digits)</p>
<p>（在dataDir文件夹下面创建一个myid文件并写入id（内容只能为1 - 255之间的数字））</p>
<h3 id="3、third（第三步）"><a href="#3、third（第三步）" class="headerlink" title="3、third（第三步）"></a>3、third（第三步）</h3><p>Send the modified HBase file to the slave node using the SCP command.</p>
<p>（使用scp命令将修改好的hbase文件发送给从节点）</p>
<p>Configuration of environmental variables（配置好环境变量）</p>
<p>Add to /etc/profile:（向/etc/profile中添加：）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export ZOOKEEPER_HOME=/usr/local/hadoop/zookeeper-3.4.14</span><br><span class="line"></span><br><span class="line">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br></pre></td></tr></table></figure>

<p>Use after adding:（添加完成之后使用：）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile（使环境变量生效）</span><br><span class="line"></span><br><span class="line">zkServer.sh start（关闭zkServer.sh stop）</span><br></pre></td></tr></table></figure>


            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://link.hhtjim.com/163/5146554.mp3'></li>
                        
                    
                        
                            <li title='1' data-url='http://link.hhtjim.com/qq/001faIUs4M2zna.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r='JacksonYuu.github.io'
        data-o='JacksonYuu'
        data-a='JacksonYuu'
        data-d='true'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
